>>> import move

>>> a = move.AvailableToPlay((1, 1))
>>> a
<AvailableToPlay: [(1, 4), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0)]>

>>> a = move.AvailableToPlay((5, 6))
>>> a
<AvailableToPlay: [(1, 0), (2, 0), (3, 0), (4, 0), (5, 1), (6, 1)]>

>>> a2 = move.AvailableToPlay(rolled=None, copy_src=a)
>>> a2
<AvailableToPlay: [(1, 0), (2, 0), (3, 0), (4, 0), (5, 1), (6, 1)]>

>>> a2.get_max()
6

>>> a2.consume(6)
>>> a2
<AvailableToPlay: [(1, 0), (2, 0), (3, 0), (4, 0), (5, 1), (6, 0)]>
>>> a2.get_max()
5

>>> pm = move.PartialMove(6, 12, 6, True)
>>> pm
<PartialMove: 13/7*>

>>> pm.is_hitting
True

>>> pm = move.PartialMove(1, 24, 23, False)
>>> pm
<PartialMove: bar/24>

>>> pm = move.PartialMove(4, 3, -1, False)
>>> pm
<PartialMove: 4/off>

>>> pm.is_undo()
False

>>> pm = move.PartialMove(4, 3, 3, False)
>>> pm.is_dance()
True

>>> pm = move.PartialMove(4, -1, 3, False)
>>> pm
<PartialMove: off/4>

>>> pm.is_undo()
True

>>> pm2 = move.PartialMove(4, 3, -1, False)
>>> pm2.are_invertible_element(pm)
True

>>> m = move.Move()
>>> m
<Move: []>

>>> m.append(pm2)
>>> m
<Move: [<PartialMove: 4/off>]>

>>> pm3 = move.PartialMove(2, 1, -1, False)
>>> m.append(pm3)
>>> m
<Move: [<PartialMove: 4/off>, <PartialMove: 2/off>]>

>>> m.append(pm)
>>> m
<Move: [<PartialMove: 2/off>]>


>>> import bglib.model.util
>>> import bglib.model.board
>>> b = bglib.model.board.board()
>>> b.rolled = (3, 1)
>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('bar'))
>>> found
<MoveFactory.Error: No chequer to move>

>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('6'))
>>> found
<PartialMove: 6/3>

>>> mf.append(found)
>>> mf.board.position[bglib.model.constants.you]
(0, 0, 1, 0, 0, 4, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)
>>> mf.move
<Move: [<PartialMove: 6/3>]>
>>> mf.available
<AvailableToPlay: [(1, 1), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0)]>

>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('6'))
>>> found
<PartialMove: 6/5>

>>> mf.append(found)
>>> mf.board.position[bglib.model.constants.you]
(0, 0, 1, 0, 1, 3, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)
>>> mf.move
<Move: [<PartialMove: 6/3>, <PartialMove: 6/5>]>
>>> mf.available
<AvailableToPlay: [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0)]>
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('6')) 
>>> found
<MoveFactory.Error: No die is available>

>>> found = None
>>> b = bglib.model.board.board(position=((0, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)), rolled = (6, 1))
>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('6')) 
>>> found
<PartialMove: 6/off>

>>> found = None
>>> b = bglib.model.board.board(position=((0, 5, 4, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (6, 1)
>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('5')) 

>>> found
<PartialMove: 5/off>


>>> found = None
>>> b = bglib.model.board.board(position=((0, 5, 4, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (4, 1)
>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_dest(bglib.model.util.move_pton('off')) 
>>> found
<MoveFactory.Error: No die is available>


>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (4, 1)

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('24'))
>>> found
<PartialMove: 24/23>

>>> mf.append(found)
>>> mf.board.position[bglib.model.constants.you]
(0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0)
>>> mf.move
<Move: [<PartialMove: 24/23>]>
>>> mf.available
<AvailableToPlay: [(1, 0), (2, 0), (3, 0), (4, 1), (5, 0), (6, 0)]>

>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('24'))
>>> found
<MoveFactory.Error: No die is available>


>>> b = bglib.model.board.board()
>>> b.rolled = (3, 1)
>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_dest(bglib.model.util.move_pton('6'))
>>> found
<MoveFactory.Error: No die is available>

>>> found = mf.guess_your_single_pm_from_dest(bglib.model.util.move_pton('5'))
>>> found
<PartialMove: 8/5>
>>> mf.append(found)
>>> mf.board.position[bglib.model.constants.you]
(0, 0, 0, 0, 1, 5, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)
>>> mf.move
<Move: [<PartialMove: 8/5>]>
>>> mf.available
<AvailableToPlay: [(1, 1), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0)]>


>>> found = mf.guess_your_single_pm_from_dest(bglib.model.util.move_pton('5'))
>>> found
<PartialMove: 6/5>

>>> mf.append(found)
>>> mf.board.position[bglib.model.constants.you]
(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)
>>> mf.move
<Move: [<PartialMove: 8/5>, <PartialMove: 6/5>]>
>>> mf.available
<AvailableToPlay: [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0)]>
>>> found = mf.guess_your_single_pm_from_dest(bglib.model.util.move_pton('5'))
>>> found
<MoveFactory.Error: No die is available>

>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (4, 1)
>>> b.position
((0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0), (0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0))

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_dest(bglib.model.util.move_pton('20'))

>>> found
<MoveFactory.Error: Can't land there>

>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 2, 4, 0, 2, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (6, 4)

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('24'), bglib.model.util.move_pton('15'))
>>> found
<MoveFactory.Error: No die is available>

>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('24'), bglib.model.util.move_pton('14'))
>>> found
<Move: [<PartialMove: 24/18>, <PartialMove: 18/14>]>


>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 0, 5, 2, 2, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (6, 4)

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('24'))
>>> found
<PartialMove: 24/20>
>>> bglib.model.util.move_ntop(found.dest)
'20'
>>> mf.append(found)

>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('20'))
>>> found
<PartialMove: 20/14>
>>> bglib.model.util.move_ntop(found.dest)
'14'


>>> found = None
>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 0, 5, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 0, 5, 2, 2, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0)))
>>> b.rolled = (6, 4)

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('24'), bglib.model.util.move_pton('14'))
>>> found
<Move: [<PartialMove: 24/20>, <PartialMove: 20/14>]>


>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 1, 4, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 0, 5, 2, 2, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0)))
>>> b.rolled = (4, 4)

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('13'), bglib.model.util.move_pton('1'))
>>> found
<Move: [<PartialMove: 13/9>, <PartialMove: 9/5>, <PartialMove: 5/1*>]>


>>> b = bglib.model.board.board(position=((1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),(8, 3, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)), rolled=(4, 2))
>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('5'), bglib.model.util.move_pton('3'))
>>> found
<Move: [<PartialMove: 5/3>]>
>>> mf.add(found)
>>> b.position
((1, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), (8, 3, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0))
>>> b.has_chequer_to_move(bglib.model.util.move_pton('3'))
2

>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('3'), bglib.model.util.move_pton('off'))
>>> found
<Move: [<PartialMove: 3/off>]>


>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 1, 4, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0),(0, 0, 0, 0, 0, 5, 2, 2, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0)))
>>> b.rolled = (4, 4)

>>> mf = move.MoveFactory(b)
>>> found = mf.guess_your_single_pm_from_source(bglib.model.util.move_pton('13'))
>>> found
<PartialMove: 13/9>

>>> mf.append(found)

>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('13'), bglib.model.util.move_pton('1'))
>>> found
<Move: [<PartialMove: 13/9>, <PartialMove: 9/5>, <PartialMove: 5/1*>]>

>>> mf.move
<Move: [<PartialMove: 13/9>]>

>>> mf.add(found)
>>> mf.move
<Move: [<PartialMove: 13/9>, <PartialMove: 13/9>, <PartialMove: 9/5>, <PartialMove: 5/1*>]>



>>> b = bglib.model.board.board(position=((0, 0, 0, 0, 1, 4, 0, 3, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1),(0, 0, 0, 0, 0, 5, 2, 2, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0)))
>>> b.rolled = (5, 5)

>>> mf = move.MoveFactory(b)
>>> found = None
>>> found = mf.guess_your_multiple_pms(bglib.model.util.move_pton('bar'), bglib.model.util.move_pton('5'))

>>> found
<Move: [<PartialMove: bar/20>, <PartialMove: 20/15>, <PartialMove: 15/10>, <PartialMove: 10/5>]>
>>> mf.add(found)

>>> found = None
>>> found = mf.guess_your_multiple_partial_undoes(bglib.model.util.move_pton('5'), bglib.model.util.move_pton('15'))
>>> found
<Move: [<PartialMove: 5/10>, <PartialMove: 10/15>]>

>>> mf.add(found)
>>> mf.move
<Move: [<PartialMove: bar/20>, <PartialMove: 20/15>]>



